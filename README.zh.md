# ğŸ¯ Competitor Hunter

> **AI é©±åŠ¨çš„ç«å“åˆ†ææ™ºèƒ½ä½“** | ä½¿ç”¨ MCPã€LangGraph å’Œ Playwright è¿›è¡Œè‡ªåŠ¨åŒ–ç½‘é¡µæŠ“å–å’Œç»“æ„åŒ–æ•°æ®æå–

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

**è¯­è¨€ | Language**: [ä¸­æ–‡](README.zh.md) | [English](README.md)

---

## ğŸ“– ç®€ä»‹

**Competitor Hunter** æ˜¯ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ AI æ™ºèƒ½ä½“ï¼Œé€šè¿‡æŠ“å–äº§å“é¡µé¢å¹¶ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹æå–ç»“æ„åŒ–ä¿¡æ¯æ¥è‡ªåŠ¨åŒ–ç«å“åˆ†æã€‚åŸºäº **æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP)** æ„å»ºï¼Œå¯ä¸ Claude Desktop å’Œå…¶ä»– MCP å…¼å®¹å®¢æˆ·ç«¯æ— ç¼é›†æˆã€‚

### æ ¸å¿ƒèƒ½åŠ›

- ğŸ” **æ™ºèƒ½ç½‘é¡µæŠ“å–**: å…·æœ‰åæ£€æµ‹åŠŸèƒ½çš„è‡ªåŠ¨åŒ–æµè§ˆå™¨å†…å®¹æå–
- ğŸ¤– **LLM é©±åŠ¨æå–**: ä½¿ç”¨ OpenAI å…¼å®¹ API è¿›è¡Œç»“æ„åŒ–æ•°æ®æå–
- ğŸ“Š **ç»“æ„åŒ–è¾“å‡º**: Pydantic éªŒè¯çš„äº§å“ä¿¡æ¯ï¼ˆå®šä»·ã€åŠŸèƒ½ã€SWOT åˆ†æï¼‰
- ğŸ”„ **LangGraph å·¥ä½œæµ**: å¼ºå¤§çš„çŠ¶æ€ç®¡ç†å’Œé”™è¯¯å¤„ç†
- ğŸ”Œ **MCP é›†æˆ**: åŸç”Ÿæ”¯æŒ Claude Desktop å’Œ MCP å®¢æˆ·ç«¯

---

## ğŸ—ï¸ æ¶æ„

ç³»ç»Ÿé‡‡ç”¨ **å…­è¾¹å½¢æ¶æ„**ï¼Œæ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚å·¥ä½œæµç¨‹ï¼šç”¨æˆ·è¯·æ±‚ â†’ MCP æœåŠ¡å™¨ â†’ LangGraph å·¥ä½œæµ â†’ æµè§ˆå™¨æŠ“å– â†’ LLM æå– â†’ è¿”å›ç»“æ„åŒ–æ•°æ®ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– AI é©±åŠ¨**: ä½¿ç”¨ LLM è¿›è¡Œæ™ºèƒ½æå–ï¼Œè‡ªåŠ¨ç”Ÿæˆ SWOT åˆ†æ
- **ğŸ“Š ç»“æ„åŒ–è¾“å‡º**: Pydantic éªŒè¯çš„æ•°æ®æ¨¡å‹ï¼ŒåŒ…å«å®šä»·ã€åŠŸèƒ½ã€æ‘˜è¦
- **ğŸ›¡ï¸ åæ£€æµ‹æœºåˆ¶**: éšæœº User-Agentã€æ™ºèƒ½æ»šåŠ¨ã€è‡ªåŠ¨æˆªå›¾
- **ğŸ”Œ MCP åŸç”Ÿ**: ä¸ Claude Desktop å’Œ Cursor IDE æ— ç¼é›†æˆ
- **ğŸ“¦ CLI å·¥å…·**: ä¸“ä¸šçš„å‘½ä»¤è¡Œç•Œé¢ï¼Œæ”¯æŒæ‰¹é‡åˆ†æ
- **å¼‚æ­¥ç¼–ç¨‹**: å®Œæ•´çš„å¼‚æ­¥ç¼–ç¨‹ä»¥è·å¾—æœ€ä½³æ€§èƒ½

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Python 3.10+**ï¼ˆæ¨è 3.11 æˆ– 3.12ï¼‰
- **UV** æˆ– **Poetry**ï¼ˆä¾èµ–ç®¡ç†å™¨ï¼‰
- **Playwright** æµè§ˆå™¨ï¼ˆè‡ªåŠ¨å®‰è£…ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**:
   ```bash
   git clone https://github.com/your-username/competitor-hunter.git
   cd competitor-hunter
   ```

2. **å®‰è£…ä¾èµ–** (ä½¿ç”¨ UV):
   ```bash
   uv sync
   ```

   æˆ–ä½¿ç”¨ Poetry:
   ```bash
   poetry install
   ```

   æˆ–ä½¿ç”¨ pip:
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   pip install -e ".[dev]"
   ```

3. **å®‰è£… Playwright æµè§ˆå™¨**:
   ```bash
   playwright install chromium
   ```

### é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶:

```env
# OpenAI API é…ç½®
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1  # å¯é€‰: è‡ªå®šä¹‰ç«¯ç‚¹
OPENAI_MODEL_NAME=gpt-4o                    # å¯é€‰: é»˜è®¤ä¸º gpt-4o

# æµè§ˆå™¨é…ç½®
HEADLESS_MODE=true                          # è°ƒè¯•æ—¶è®¾ç½®ä¸º false

# æ•°æ®åº“é…ç½®
DB_PATH=data/competitors.db                 # SQLite æ•°æ®åº“è·¯å¾„
```

ğŸ’¡ **æç¤º**: å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶å¡«å†™æ‚¨çš„å€¼:

```bash
cp .env.example .env
```

---

## ğŸ“¸ æˆªå›¾å±•ç¤ºä¸ç¤ºä¾‹

### åˆ†æç»“æœæˆªå›¾

![Notion å®šä»·åˆ†æ](./docs/images/notion-pricing-analysis.png)
*Notion å®šä»·é¡µé¢åˆ†ææˆªå›¾*

### CLI è¾“å‡ºç¤ºä¾‹

```bash
$ competitor-hunter https://www.notion.so/pricing
ğŸ” æ­£åœ¨åˆ†æ: https://www.notion.so/pricing

âœ… åˆ†æå®Œæˆï¼

======================================================================
ğŸ“¦ äº§å“åç§°: Notion
ğŸ”— URL: https://www.notion.so/pricing
ğŸ•’ æ›´æ–°æ—¶é—´: 2024-06-13 00:00:00+00:00
======================================================================

ğŸ’° å®šä»·æ–¹æ¡ˆ (4 ä¸ª):
   â€¢ Free: 0 USD / monthly
   â€¢ Plus: 10 USD / monthly
   â€¢ Business: 20 USD / monthly
   â€¢ Enterprise: Custom USD / custom

âœ¨ æ ¸å¿ƒåŠŸèƒ½ (13 ä¸ª):
   1. AI è‡ªåŠ¨åŒ–
   2. ä¼ä¸šæœç´¢
   3. ä¼šè®®è®°å½•
   ...

ğŸ’¾ ç»“æœå·²ä¿å­˜åˆ°: reports/product_Notion.json
```

### JSON è¾“å‡ºç»“æ„

åˆ†æç»“æœä»¥ç»“æ„åŒ– JSON æ–‡ä»¶ä¿å­˜ï¼š

```json
{
  "product_name": "Notion",
  "url": "https://www.notion.so/pricing",
  "pricing_tiers": [
    {
      "name": "Free",
      "price": "0",
      "currency": "USD",
      "billing_cycle": "monthly"
    },
    {
      "name": "Plus",
      "price": "10",
      "currency": "USD",
      "billing_cycle": "monthly"
    }
  ],
  "core_features": [
    "AI è‡ªåŠ¨åŒ–",
    "æ–‡æ¡£ç¼–è¾‘",
    "çŸ¥è¯†åº“"
  ],
  "summary": "## äº§å“æ¦‚è¿°\nNotion æ˜¯ä¸€æ¬¾é›†æ–‡æ¡£ç¼–è¾‘...",
  "last_updated": "2024-06-13T00:00:00Z"
}
```

---

## ğŸ“š ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šCLI å‘½ä»¤ï¼ˆæœ€ç®€å•ï¼‰

å®‰è£…åï¼Œä½¿ç”¨ `competitor-hunter` å‘½ä»¤ï¼š

```bash
# åˆ†æå•ä¸ªç½‘ç«™
competitor-hunter https://www.notion.so/pricing

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
competitor-hunter https://example.com output.json

# æ‰¹é‡åˆ†æ
competitor-hunter https://site1.com https://site2.com https://site3.com
```

åˆ†æç»“æœä¼šè‡ªåŠ¨ä¿å­˜åˆ° `reports/` ç›®å½•ï¼Œä½¿ç”¨æ­£ç¡®çš„ UTF-8 ç¼–ç ã€‚

### æ–¹å¼äºŒï¼šMCP æœåŠ¡å™¨æ¨¡å¼ï¼ˆæ¨èç”¨äº AI åŠ©æ‰‹ï¼‰

è¿è¡Œ MCP æœåŠ¡å™¨ä»¥å¯ç”¨ä¸ Claude Desktop æˆ– Cursor çš„é›†æˆï¼š

```bash
python -m src.competitor_hunter.interface.mcp_server.server
```

#### Claude Desktop é›†æˆ

å°†ä»¥ä¸‹é…ç½®æ·»åŠ åˆ°æ‚¨çš„ Claude Desktop `claude_desktop_config.json`ï¼š

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`  
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

```json
{
  "mcpServers": {
    "competitor-hunter": {
      "command": "python",
      "args": [
        "-m",
        "src.competitor_hunter.interface.mcp_server.server"
      ],
      "cwd": "/path/to/competitor-hunter"
    }
  }
}
```

#### Cursor IDE é›†æˆ

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.cursor/mcp.json`ï¼š

```json
{
  "mcpServers": {
    "competitor-hunter": {
      "command": "python",
      "args": [
        "-m",
        "src.competitor_hunter.interface.mcp_server.server"
      ],
      "cwd": "${workspaceFolder}"
    }
  }
}
```

é‡å¯åï¼Œæ‚¨å¯ä»¥åœ¨èŠå¤©ä¸­ç›´æ¥ä½¿ç”¨ï¼š

```
åˆ†æè¿™ä¸ªç«å“ï¼šhttps://www.notion.so/pricing
```

### æ–¹å¼ä¸‰ï¼šPython åº“

åœ¨ Python ä»£ç ä¸­ç›´æ¥ä½¿ç”¨ LangGraph å·¥ä½œæµï¼š

```python
import asyncio
from competitor_hunter.core import graph, AgentState, cleanup_resources

async def analyze(url: str):
    # åˆå§‹åŒ–çŠ¶æ€
    initial_state: AgentState = {
        "url": url,
        "scraped_content": None,
        "product": None,
        "error": None,
    }
    
    # è¿è¡Œå·¥ä½œæµ
    result = await graph.ainvoke(initial_state)
    
    # æ£€æŸ¥ç»“æœ
    if result.get("error"):
        print(f"é”™è¯¯: {result['error']}")
        return None
    
    product = result["product"]
    print(f"äº§å“: {product.product_name}")
    print(f"å®šä»·å±‚çº§: {len(product.pricing_tiers)}")
    print(f"åŠŸèƒ½: {product.core_features}")
    
    return product

# ä½¿ç”¨
product = await analyze("https://www.notion.so/pricing")
await cleanup_resources()
```

### è¾“å‡ºç»“æ„

æ‰€æœ‰åˆ†æç»“æœéƒ½ä¿å­˜åˆ° `reports/` ç›®å½•ï¼š

```
reports/
â”œâ”€â”€ product_Notion.json
â”œâ”€â”€ product_Example_Domain.json
â””â”€â”€ ...
```

æ¯ä¸ª JSON æ–‡ä»¶åŒ…å«ï¼š
- äº§å“åç§°å’Œ URL
- å®šä»·å±‚çº§ï¼ˆåç§°ã€ä»·æ ¼ã€è´§å¸ã€è®¡è´¹å‘¨æœŸï¼‰
- æ ¸å¿ƒåŠŸèƒ½åˆ—è¡¨
- Markdown æ ¼å¼çš„æ‘˜è¦ï¼ˆåŒ…å« SWOT åˆ†æï¼‰
- æœ€åæ›´æ–°æ—¶é—´æˆ³

### è¾“å‡ºç¤ºä¾‹

```json
{
  "product_name": "Notion",
  "url": "https://www.notion.so/pricing",
  "pricing_tiers": [
    {
      "name": "Free",
      "price": "0",
      "currency": "USD",
      "billing_cycle": "monthly"
    },
    {
      "name": "Plus",
      "price": "10",
      "currency": "USD",
      "billing_cycle": "monthly"
    }
  ],
  "core_features": [
    "AI è‡ªåŠ¨åŒ–",
    "æ–‡æ¡£ç¼–è¾‘",
    "çŸ¥è¯†åº“",
    "é¡¹ç›®ç®¡ç†"
  ],
  "summary": "## äº§å“æ¦‚è¿°\nNotion æ˜¯ä¸€æ¬¾é›†æ–‡æ¡£ç¼–è¾‘...",
  "last_updated": "2024-06-13T00:00:00Z"
}
```

---

## ğŸ§ª å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_crawler.py -v

# è¿è¡Œè¦†ç›–ç‡æµ‹è¯•
pytest tests/ --cov=src/competitor_hunter --cov-report=html
```

### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–ä»£ç 
black src/ tests/

# ä»£ç æ£€æŸ¥
ruff check src/ tests/

# ç±»å‹æ£€æŸ¥ï¼ˆå¦‚æœä½¿ç”¨ mypyï¼‰
mypy src/
```

### é¡¹ç›®ç»“æ„

```
competitor-hunter/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ competitor_hunter/
â”‚       â”œâ”€â”€ cli.py             # CLI å‘½ä»¤è¡Œç•Œé¢
â”‚       â”œâ”€â”€ main.py            # åº”ç”¨å…¥å£ç‚¹
â”‚       â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ core/               # é¢†åŸŸæ¨¡å‹å’Œ LangGraph å·¥ä½œæµ
â”‚       â”‚   â”œâ”€â”€ models.py       # Pydantic æ¨¡å‹ï¼ˆCompetitorProduct ç­‰ï¼‰
â”‚       â”‚   â””â”€â”€ graph.py        # LangGraph å·¥ä½œæµå®šä¹‰
â”‚       â”œâ”€â”€ infrastructure/     # å¤–éƒ¨æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ browser/        # Playwright æµè§ˆå™¨æœåŠ¡
â”‚       â”‚   â””â”€â”€ llm/            # LLM æå–å™¨æœåŠ¡
â”‚       â””â”€â”€ interface/          # å…¥å£ç‚¹
â”‚           â””â”€â”€ mcp_server/     # MCP æœåŠ¡å™¨å®ç°
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ app.yaml.example        # é…ç½®æ¨¡æ¿
â”œâ”€â”€ docker/                     # Docker é…ç½®
â”‚   â”œâ”€â”€ Dockerfile              # Docker é•œåƒå®šä¹‰
â”‚   â””â”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â”œâ”€â”€ examples/                   # ç¤ºä¾‹è„šæœ¬
â”œâ”€â”€ tests/                      # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ reports/                     # åˆ†æç»“æœï¼ˆgitignoredï¼‰
â”œâ”€â”€ data/                       # SQLite æ•°æ®åº“ï¼ˆgitignoredï¼‰
â”œâ”€â”€ logs/                       # æˆªå›¾å’Œæ—¥å¿—ï¼ˆgitignoredï¼‰
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®ä¾èµ–å’Œ CLI å…¥å£ç‚¹
â””â”€â”€ README.md                   # è‹±æ–‡æ–‡æ¡£
```

---

## ğŸ“¦ ä¾èµ–é¡¹

### æ ¸å¿ƒä¾èµ–

- **mcp**: æ¨¡å‹ä¸Šä¸‹æ–‡åè®®æœåŠ¡å™¨å®ç°
- **langgraph**: å·¥ä½œæµç¼–æ’
- **langchain**: LLM é›†æˆæ¡†æ¶
- **playwright**: æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **pydantic**: æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **html2text**: HTML åˆ° Markdown è½¬æ¢
- **loguru**: ç»“æ„åŒ–æ—¥å¿—

### å¼€å‘ä¾èµ–

- **pytest**: æµ‹è¯•æ¡†æ¶
- **pytest-asyncio**: å¼‚æ­¥æµ‹è¯•æ”¯æŒ
- **ruff**: å¿«é€Ÿ Python ä»£ç æ£€æŸ¥å·¥å…·
- **black**: ä»£ç æ ¼å¼åŒ–å·¥å…·

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'æ·»åŠ ä¸€äº›å¾ˆæ£’çš„åŠŸèƒ½'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- ä½¿ç”¨ [LangGraph](https://github.com/langchain-ai/langgraph) è¿›è¡Œå·¥ä½œæµç¼–æ’
- ä½¿ç”¨ [Playwright](https://playwright.dev/) è¿›è¡Œæµè§ˆå™¨è‡ªåŠ¨åŒ–
- é›†æˆ [æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP)](https://modelcontextprotocol.io/) ç”¨äº AI æ™ºèƒ½ä½“é€šä¿¡

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ã€ç–‘é—®æˆ–è´¡çŒ®ï¼Œè¯·åœ¨ [GitHub](https://github.com/your-username/competitor-hunter/issues) ä¸Šæäº¤ issueã€‚

---

**ä¸ºç«äº‰æƒ…æŠ¥è€Œç”¨å¿ƒæ‰“é€  â¤ï¸**

